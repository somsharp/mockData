System.register(["./p-2cf3beef.system.js"],(function(t){"use strict";var e,n,i,r,l;return{setters:[function(t){e=t.r;n=t.c;i=t.h;r=t.d;l=t.H}],execute:function(){var o=':host{max-width:100%;font-family:"Segoe UI", "Segoe UI Semibold", "Segoe UI Web (West European)",\r\n  -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif}:host(.error){border-color:#e79804}.layout{display:-ms-flexbox;display:flex;padding-top:10px;padding-right:16px;padding-bottom:8px;padding-left:16px;-ms-flex:1 1 0%;flex:1 1 0%}.slimContainer{background-color:#f8f8f8;padding-left:20px}.slimContainer h1{font-size:32px;padding-top:15px}';var p=function(){function t(t){e(this,t);this.supplierIdInputValid=false;this.loading=false;this.paymentTileFullScreenSelected=n(this,"paymentTileFullScreenSelected",7)}t.prototype.SupplierIdChanged=function(t,e){if(t!==e){this.supplierIdInputValue=t;this.supplierIdInputValid=true;this.fetchPaymentData(t)}};t.prototype.onFullSelectedHandler=function(t){if(t.detail=="paymentCard"){console.log("Received the custom fullSelectedHandler event: ",t.detail);if(this.onExpandClick)this.onExpandClick(t.detail);this.paymentTileFullScreenSelected.emit("")}};t.prototype.onUserInput=function(t){this.supplierIdInputValue=t.target.value;if(this.supplierIdInputValue.trim()!==""){this.supplierIdInputValid=true}else{this.supplierIdInputValid=false}};t.prototype.onFetchPaymentData=function(t){t.preventDefault();this.supplierId=this.supplierIdInputElement.value};t.prototype.componentWillLoad=function(){};t.prototype.componentDidLoad=function(){if(this.supplierId){this.supplierIdInputValue=this.supplierId;this.supplierIdInputValid=true;this.fetchPaymentData(this.supplierId)}};t.prototype.componentWillUpdate=function(){};t.prototype.componentDidUpdate=function(){};t.prototype.componentDidUnload=function(){};t.prototype.onSupplierSelected=function(t){if(t.detail&&t.detail!==this.supplierId){this.supplierId=t.detail}};t.prototype.fetchPaymentData=function(t){var e=this;console.log("loading payments for supplierId:",t);this.total=0;this.paid=0;this.inprogress=0;this.failed=0;this.loading=true;fetch("http://localhost:8090/data/Payments.json").then((function(t){if(t.status!==200){throw new Error("Invalid!")}return t.json()})).then((function(t){var n=t;var i=[];var r=function(t){var e=i.filter((function(e){return e.PaymentDocumentNumber===n[t].PaymentDocumentNumber}));if(e.length==0){i.push(n[t])}};for(var l in n){r(l)}e.total=i.length;var o=i.filter((function(t){return t.PrimaryStatus==="PaymentSent"}));e.paid=o.length;var p=i.filter((function(t){return t.PrimaryStatus==="PaymentInProgress"}));e.inprogress=p.length;var s=i.filter((function(t){return t.PrimaryStatus==="PaymentError"}));e.failed=s.length;e.loading=false})).catch((function(t){e.error=t.message;e.total=null;e.loading=false}))};t.prototype.hostData=function(){return{class:this.error?"error":""}};t.prototype.renderInputComponent=function(){var t=this;if(!this.allowInput)return null;return i("form",{class:"layout",onSubmit:this.onFetchPaymentData.bind(this)},i("input",{id:"supplier-id",ref:function(e){return t.supplierIdInputElement=e},value:this.supplierIdInputValue,onInput:this.onUserInput.bind(this)}),i("button",{type:"submit",disabled:!this.supplierIdInputValid||this.loading},"Test"))};t.prototype.onFullScreenSelected=function(){};t.prototype.__stencil_render=function(){var t=i("payment-card-summary",{"slim-layout":this.slimLayout,total:this.total,paid:this.paid,inprogress:this.inprogress,failed:this.failed});if(this.loading){t=i("uc-spinner",null)}if(this.slimLayout)return i("div",{class:"slimContainer"},i("h1",null,"Payments ("+this.total+")"),t);return[i("dxp-card",{"card-key":"paymentCard","card-title":"Payment ("+this.total+")"},this.renderInputComponent(),i("div",null,t))]};Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{supplierId:["SupplierIdChanged"]}},enumerable:false,configurable:true});t.prototype.render=function(){return i(l,this.hostData(),this.__stencil_render())};return t}();t("payment_card",p);p.style=o;var s=':host{font-family:"Segoe UI", "Segoe UI Semibold", "Segoe UI Web (West European)",\r\n  -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif;max-width:100%}';var a=function(){function t(t){e(this,t);this.supplierIdInputValid=false;this.loading=false;this.selectedPaymentNumber=null;this.showDetails=false;this.ucPaymentSelected=n(this,"ucPaymentSelected",7)}t.prototype.SupplierIdChanged=function(t,e){if(t!==e){this.supplierIdInputValue=t;this.supplierIdInputValid=true}};t.prototype.onUserInput=function(t){this.supplierIdInputValue=t.target.value;if(this.supplierIdInputValue.trim()!==""){this.supplierIdInputValid=true}else{this.supplierIdInputValid=false}};t.prototype.onFetchPaymentData=function(t){t.preventDefault();this.supplierId=this.supplierIdInputElement.value};t.prototype.componentWillLoad=function(){};t.prototype.componentDidLoad=function(){if(this.supplierId){this.supplierIdInputValue=this.supplierId;this.supplierIdInputValid=true}};t.prototype.componentWillUpdate=function(){};t.prototype.componentDidUpdate=function(){};t.prototype.componentDidUnload=function(){};t.prototype.onSupplierSelected=function(t){if(t.detail&&t.detail!==this.supplierId){this.supplierId=t.detail}};t.prototype.onPaymentSelected=function(t){if(t.detail&&t.detail!==this.selectedPaymentNumber){this.selectedPaymentNumber=t.detail;this.showDetails=true}};t.prototype.onCancelModal=function(t){console.log("Modal dialog cancelled: "+t.detail);this.showDetails=false};t.prototype.hostData=function(){return{class:this.error?"error":""}};t.prototype.renderInputComponent=function(){var t=this;if(!this.allowInput)return null;return i("form",{class:"layout",onSubmit:this.onFetchPaymentData.bind(this)},i("input",{id:"supplier-id",ref:function(e){return t.supplierIdInputElement=e},value:this.supplierIdInputValue,onInput:this.onUserInput.bind(this)}),i("button",{type:"submit",disabled:!this.supplierIdInputValid||this.loading},"Test"))};t.prototype.__stencil_render=function(){var t=i("payment-list",{"supplier-id":this.supplierId,"show-test-input":"false"});if(this.showDetails){t=[i("payment-list",{"supplier-id":this.supplierId,"show-test-input":"false"}),i("dxp-modal",{heading:"Payment ("+this.selectedPaymentNumber+")",visible:true},i("payment-detail",{"payment-number":this.selectedPaymentNumber},"        "))]}if(this.loading){t=i("uc-spinner",null)}return[this.renderInputComponent(),i("div",null,t)]};Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{supplierId:["SupplierIdChanged"]}},enumerable:false,configurable:true});t.prototype.render=function(){return i(l,this.hostData(),this.__stencil_render())};return t}();t("payment_list_detail",a);a.style=s}}}));