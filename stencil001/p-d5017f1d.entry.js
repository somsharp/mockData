import{r as t,h as e,d as i,H as s,c as a}from"./p-ac6f7314.js";class n{constructor(e){t(this,e),this.paymentNumberInputValid=!1,this.loading=!1}SupplierIdChanged(t,e){t!==e&&(this.paymentNumberInputValue=t,this.paymentNumberInputValid=!0,this.fetchPaymentData(t))}onUserInput(t){this.paymentNumberInputValue=t.target.value,this.paymentNumberInputValid=""!==this.paymentNumberInputValue.trim()}onFetchPaymentData(t){t.preventDefault(),this.paymentNumber=this.paymentNumberInputElement.value}componentWillLoad(){}componentDidLoad(){this.paymentNumber&&(this.paymentNumberInputValue=this.paymentNumber,this.paymentNumberInputValid=!0,this.fetchPaymentData(this.paymentNumber))}componentWillUpdate(){}componentDidUpdate(){}componentDidUnload(){}onPaymentSelected(t){t.detail&&t.detail!==this.paymentNumber&&(this.paymentNumber=t.detail)}fetchPaymentData(t){console.log("loading ",t),this.payment=null,this.loading=!0,fetch("http://localhost:8090/data/payment.json").then(t=>{if(200!==t.status)throw new Error("Invalid!");return t.json()}).then(t=>{this.payment=t,this.loading=!1}).catch(t=>{this.error=t.message,this.payment=null,this.loading=!1})}hostData(){return{class:this.error?"error":""}}renderInvoice(){return this.payment?[e("div",{class:"layout-main-header"},e("div",{class:"cards"},e("div",{class:"card"},e("div",{class:"label"},"Payment#"),e("div",{class:"value"},this.paymentNumber)),e("div",{class:"card"},e("div",{class:"label"},"Payment Date"),e("div",{class:"value"},"27-Oct-2018")),e("div",{class:"card"},e("div",{class:"label"},"Total Payment Amount"),e("div",{class:"value"},"300.00 EUR")),e("div",{class:"card"},e("div",{class:"label"},"Payment Status"),e("div",{class:"value"},"PaymentInProgress")),e("div",{class:"card"},e("div",{class:"label"},"Company Code"),e("div",{class:"value"},"1033")))),e("dxp-table",{characters:this.payment.lines,columns:[{field:"supplierInvoiceNumber",heading:"Supplier Invoice Number"},{field:"invoiceNumber",heading:"Microsoft Invoice Number"},{field:"invoiceAmount",heading:"Amount Paid"},{field:"clearedDate",heading:"Approved Date"},{field:"fiscalYear",heading:"Fiscal Year"}]})]:e("span",null)}renderInputComponent(){return this.allowInput?e("form",{class:"layout",onSubmit:this.onFetchPaymentData.bind(this)},e("input",{id:"payment-number",ref:t=>this.paymentNumberInputElement=t,value:this.paymentNumberInputValue,onInput:this.onUserInput.bind(this)}),e("button",{type:"submit",disabled:!this.paymentNumberInputValid||this.loading},"Test")):null}__stencil_render(){let t=this.renderInvoice();return this.loading&&(t=e("uc-spinner",null)),[e("div",null,this.renderInputComponent(),e("div",null,t))]}get el(){return i(this)}static get watchers(){return{paymentNumber:["SupplierIdChanged"]}}render(){return e(s,this.hostData(),this.__stencil_render())}}n.style=':host{max-width:100%;font-family:"Segoe UI", "Segoe UI Semibold", "Segoe UI Web (West European)",\r\n  -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif}:host(.error){border-color:#e79804}.layout{display:-ms-flexbox;display:flex;padding-top:10px;padding-right:16px;padding-bottom:8px;padding-left:16px;-ms-flex:1 1 0%;flex:1 1 0%}.layout-main-header{background-color:#f8f8f8}.cards{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start;-ms-flex-direction:row;flex-direction:row;max-height:100vh}.card{margin:10px;width:200px}.label{color:#333333;margin:0;font-size:14px;font-family:Segoe UI;font-weight:bold}.value{color:#333333;margin:0;font-size:12px;margin-top:5px;font-family:Segoe UI}';class l{constructor(e){t(this,e),this.supplierIdInputValid=!1,this.loading=!1,this.handlePaymentNumberClick=t=>{this.ucPaymentSelected.emit(t.PaymentDocumentNumber)},this.ucPaymentSelected=a(this,"ucPaymentSelected",7)}onPaymentTileFullScreenSelected(t){t.detail&&t.detail!==this.filter&&(this.filter=t.detail,this.fetchPaymentData(this.supplierId))}SupplierIdChanged(t,e){t!==e&&(this.supplierIdInputValue=t,this.supplierIdInputValid=!0,this.fetchPaymentData(t))}onUserInput(t){this.supplierIdInputValue=t.target.value,this.supplierIdInputValid=""!==this.supplierIdInputValue.trim()}onFetchPaymentData(t){t.preventDefault(),this.supplierId=this.supplierIdInputElement.value}componentWillLoad(){}componentDidLoad(){this.supplierId&&(this.supplierIdInputValue=this.supplierId,this.supplierIdInputValid=!0,this.fetchPaymentData(this.supplierId))}componentWillUpdate(){}componentDidUpdate(){}componentDidUnload(){}onSupplierSelected(t){t.detail&&t.detail!==this.supplierId&&(this.supplierId=t.detail)}fetchPaymentData(t){console.log(t),this.loading=!0,fetch("http://localhost:8090/data/payments.json").then(t=>{if(200!==t.status)throw new Error("Invalid!");return t.json()}).then(t=>{const e=t;this.payments=[];for(let i in e)0==this.payments.filter(t=>t.PaymentDocumentNumber===e[i].PaymentDocumentNumber).length&&this.payments.push(e[i]);this.filter.length>0&&(this.payments=this.payments.filter(t=>t.PrimaryStatus===this.filter)),this.loading=!1}).catch(t=>{this.error=t.message,this.loading=!1})}hostData(){return{class:this.error?"error":""}}renderPaymentNumber(t){return e("a",{href:"#",onClick:()=>{this.handlePaymentNumberClick(t)}},t.PaymentDocumentNumber)}renderInvoiceDueDate(t){const i=new Intl.DateTimeFormat("en-US").format(new Date(t.dueDate));return e("span",null,i)}__stencil_render(){const t=[{field:"PaymentDocumentNumber",heading:"Payment Doc Number",onRenderCell:this.renderPaymentNumber.bind(this)},{field:"PrimaryStatus",heading:"Status"},{field:"SecondaryStatus",heading:"Details"},{field:"VendorID",heading:"Supplier ID"},{field:"CompanyCode",heading:"Company Code"}];let i="";this.payments&&(i=`Showing: All Payments (${this.payments.length})`,this.filter&&(i=`Showing: ${this.filter} (${this.payments.length})`));let s=e("dxp-table",{heading:i,characters:this.payments,columns:t});return this.loading&&(s=e("uc-spinner",null)),[e("form",{class:"no-input",onSubmit:this.onFetchPaymentData.bind(this)},e("input",{id:"supplier-id",ref:t=>this.supplierIdInputElement=t,value:this.supplierIdInputValue,onInput:this.onUserInput.bind(this)}),e("button",{type:"submit",disabled:!this.supplierIdInputValid||this.loading},"Test")),e("div",null,s)]}get el(){return i(this)}static get watchers(){return{supplierId:["SupplierIdChanged"]}}render(){return e(s,this.hostData(),this.__stencil_render())}}l.style=':host{max-width:100%;font-family:"Segoe UI", "Segoe UI Semibold", "Segoe UI Web (West European)",\r\n  -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif}:host(.error){border-color:#e79804}.no-input{display:none}.layout{display:-ms-flexbox;display:flex;padding-top:10px;padding-right:16px;padding-bottom:8px;padding-left:16px;-ms-flex:1 1 0%;flex:1 1 0%}';export{n as payment_detail,l as payment_list}