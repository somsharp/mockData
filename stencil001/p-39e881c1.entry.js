import{r as t,c as e,h as s,d as i,H as n}from"./p-ac6f7314.js";class l{constructor(s){t(this,s),this.supplierIdInputValid=!1,this.loading=!1,this.paymentTileFullScreenSelected=e(this,"paymentTileFullScreenSelected",7)}SupplierIdChanged(t,e){t!==e&&(this.supplierIdInputValue=t,this.supplierIdInputValid=!0,this.fetchPaymentData(t))}onFullSelectedHandler(t){"paymentCard"==t.detail&&(console.log("Received the custom fullSelectedHandler event: ",t.detail),this.onExpandClick&&this.onExpandClick(t.detail),this.paymentTileFullScreenSelected.emit(""))}onUserInput(t){this.supplierIdInputValue=t.target.value,this.supplierIdInputValid=""!==this.supplierIdInputValue.trim()}onFetchPaymentData(t){t.preventDefault(),this.supplierId=this.supplierIdInputElement.value}componentWillLoad(){}componentDidLoad(){this.supplierId&&(this.supplierIdInputValue=this.supplierId,this.supplierIdInputValid=!0,this.fetchPaymentData(this.supplierId))}componentWillUpdate(){}componentDidUpdate(){}componentDidUnload(){}onSupplierSelected(t){t.detail&&t.detail!==this.supplierId&&(this.supplierId=t.detail)}fetchPaymentData(t){console.log("loading payments for supplierId:",t),this.total=0,this.paid=0,this.inprogress=0,this.failed=0,this.loading=!0,fetch("http://localhost:8090/data/Payments.json").then(t=>{if(200!==t.status)throw new Error("Invalid!");return t.json()}).then(t=>{const e=t;let s=[];for(let h in e)0==s.filter(t=>t.PaymentDocumentNumber===e[h].PaymentDocumentNumber).length&&s.push(e[h]);this.total=s.length;const i=s.filter(t=>"PaymentSent"===t.PrimaryStatus);this.paid=i.length;const n=s.filter(t=>"PaymentInProgress"===t.PrimaryStatus);this.inprogress=n.length;const l=s.filter(t=>"PaymentError"===t.PrimaryStatus);this.failed=l.length,this.loading=!1}).catch(t=>{this.error=t.message,this.total=null,this.loading=!1})}hostData(){return{class:this.error?"error":""}}renderInputComponent(){return this.allowInput?s("form",{class:"layout",onSubmit:this.onFetchPaymentData.bind(this)},s("input",{id:"supplier-id",ref:t=>this.supplierIdInputElement=t,value:this.supplierIdInputValue,onInput:this.onUserInput.bind(this)}),s("button",{type:"submit",disabled:!this.supplierIdInputValid||this.loading},"Test")):null}onFullScreenSelected(){}__stencil_render(){let t=s("payment-card-summary",{"slim-layout":this.slimLayout,total:this.total,paid:this.paid,inprogress:this.inprogress,failed:this.failed});return this.loading&&(t=s("uc-spinner",null)),this.slimLayout?s("div",{class:"slimContainer"},s("h1",null,"Payments ("+this.total+")"),t):[s("dxp-card",{"card-key":"paymentCard","card-title":"Payment ("+this.total+")"},this.renderInputComponent(),s("div",null,t))]}get el(){return i(this)}static get watchers(){return{supplierId:["SupplierIdChanged"]}}render(){return s(n,this.hostData(),this.__stencil_render())}}l.style=':host{max-width:100%;font-family:"Segoe UI", "Segoe UI Semibold", "Segoe UI Web (West European)",\r\n  -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif}:host(.error){border-color:#e79804}.layout{display:-ms-flexbox;display:flex;padding-top:10px;padding-right:16px;padding-bottom:8px;padding-left:16px;-ms-flex:1 1 0%;flex:1 1 0%}.slimContainer{background-color:#f8f8f8;padding-left:20px}.slimContainer h1{font-size:32px;padding-top:15px}';class h{constructor(s){t(this,s),this.supplierIdInputValid=!1,this.loading=!1,this.selectedPaymentNumber=null,this.showDetails=!1,this.ucPaymentSelected=e(this,"ucPaymentSelected",7)}SupplierIdChanged(t,e){t!==e&&(this.supplierIdInputValue=t,this.supplierIdInputValid=!0)}onUserInput(t){this.supplierIdInputValue=t.target.value,this.supplierIdInputValid=""!==this.supplierIdInputValue.trim()}onFetchPaymentData(t){t.preventDefault(),this.supplierId=this.supplierIdInputElement.value}componentWillLoad(){}componentDidLoad(){this.supplierId&&(this.supplierIdInputValue=this.supplierId,this.supplierIdInputValid=!0)}componentWillUpdate(){}componentDidUpdate(){}componentDidUnload(){}onSupplierSelected(t){t.detail&&t.detail!==this.supplierId&&(this.supplierId=t.detail)}onPaymentSelected(t){t.detail&&t.detail!==this.selectedPaymentNumber&&(this.selectedPaymentNumber=t.detail,this.showDetails=!0)}onCancelModal(t){console.log("Modal dialog cancelled: "+t.detail),this.showDetails=!1}hostData(){return{class:this.error?"error":""}}renderInputComponent(){return this.allowInput?s("form",{class:"layout",onSubmit:this.onFetchPaymentData.bind(this)},s("input",{id:"supplier-id",ref:t=>this.supplierIdInputElement=t,value:this.supplierIdInputValue,onInput:this.onUserInput.bind(this)}),s("button",{type:"submit",disabled:!this.supplierIdInputValid||this.loading},"Test")):null}__stencil_render(){let t=s("payment-list",{"supplier-id":this.supplierId,"show-test-input":"false"});return this.showDetails&&(t=[s("payment-list",{"supplier-id":this.supplierId,"show-test-input":"false"}),s("dxp-modal",{heading:"Payment ("+this.selectedPaymentNumber+")",visible:!0},s("payment-detail",{"payment-number":this.selectedPaymentNumber},"        "))]),this.loading&&(t=s("uc-spinner",null)),[this.renderInputComponent(),s("div",null,t)]}get el(){return i(this)}static get watchers(){return{supplierId:["SupplierIdChanged"]}}render(){return s(n,this.hostData(),this.__stencil_render())}}h.style=':host{font-family:"Segoe UI", "Segoe UI Semibold", "Segoe UI Web (West European)",\r\n  -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif;max-width:100%}';export{l as payment_card,h as payment_list_detail}